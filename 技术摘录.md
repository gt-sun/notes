
[TOC]


## 


## 支付是否需要对接N多银行？

Q：支付的这个需要对接多个银行么？

A：需要，我们现在对接了快 10 个银行，还在对接更多的银行。除了银行，第三方支付、外卡等，也都在接。


## 关于数据库

Q：Hbase 和 mongo 读写分离这块能具体说一下嘛？ 和 mongo 副本集比较有啥优势么？

A：这个问题就是涉及到如何使用数据库的问题。每个数据库都有自己的优势，比如 HBase 写入性能极好，上万的 TPC 都没问题，但是读取的性能就差了，就小几千。 Couchbase 读取的性能极佳，但是写入就很一般。 Redis 读写都很不错，就是不能支持太大粒度的数据，以及容量有限制。 MongoDB 似乎比较尴尬，功能很全面，但是读写都一般。

## 关于微服务

Q：微服务是按表来拆分的，那么是一个服务自己连一个数据库还是有统一得数据层呢？

A：RPC 层的微服务，基本是按表来拆分了，自己连一个数据库。这里实际也分两层，数据访问层和业务逻辑层。如果业务逻辑很薄，就合并成一层了。

Q：RPC 为什么不用国产 Dubbo 啊？

A：这是个好问题，我们经常被问这个问题。 Dubbo 是个不错的框架，相对微服务来说，还是太重了。 而且，性能上，比 Thrift 还是要差不少。 所以我们就直接上 Thrift 了。

Q：用 Thrift 做 RPC，服务发现也是自己做的吗？

A：是的，这个用 Apache Curator 比较容易实现，我们就自己搞一个。


## 服务网关

Q：服务网关使用 Nginx + Lua 方案有考虑过吗？

A：有，我第二个项目就用这个方案来做，正在做。

Q：服务网关重点需要关注那些点？

A：我们实际有两个网关，一个是对外的 Web 接口服务网关，关注的是 Load Balance 以及可靠性。 特别是服务重启的时候，网关要提前解除注册，重启之后，网关要延后注册上。 这有不少成熟的组件可以用，不一定像我们这样自己开发。 RPC 网关，也是要注意稳定性和性能，以及网关决不能和业务耦合。

## jar包的管理

Q：我有个问题，你们这个项目一定有很多微服务的 jar 包，这是 jar 包在服务器上是怎么分布的？

A：对 Web 接口类型的微服务，其实和普通的项目一样，每个项目就管自己的 jar 包以及它所依赖的 jar 包。 也有人会把所有的 jar 包汇总起来打成一个大 jar 包，这种方式，容易出现资源文件被覆盖的情况，也不容易更新，不推荐。